<ion-view class="chat-bg" view-title="{{chatName.formatted}}">
<ion-nav-buttons side="right">
  <button ng-click="openModal(2)" class="button button-icon icon ion-images nav-button-media"></button>
</ion-nav-buttons>
 <ion-content delegate-handle="chat" id="chat-list" on-swipe-left="showTime = true" on-swipe-right="showTime = false"
  class="content-stable mh-padding">
  <div class="spinner" ng-hide="chatLoaded">
  <ion-spinner></ion-spinner>
  </div>
    <div ng-repeat="post in posts track by $index" >
    <div class="chat-date" ng-if="sameDay(post.timestamp, posts[$index-1].timestamp)">{{post.timestamp | toDate}}</div>
   
     <div ng-if="post.user !== profile.name && post.user !== posts[$index - 1].user" class="messageName slide-right" ng-class="{'slide-right': !showTime, '': showTime}">{{post.user}}</div>
    
    <div ng-class="{other:post.user !== profile.name}" class="messages">
      <div class="message slide-right" ng-class="{'slide-right': !showTime, '': showTime}">
        <span ng-if="post.message">{{post.message}}</span>
        <img ng-if="post.img" on-hold="openPopover($event, post.firebase)" ng-click="showImage(post.img, 1)" ng-src="{{post.img}}" class="post-img" />
      </div>

      <div class="time slide-right" ng-class="{'slide-right': !showTime, '': showTime}">
        {{post.timestamp | date:"h:mm a"}}
      </div>
    </div>
    </div>
  </ion-content>


  <form id="footer-input" ng-submit="add(message)">
    <ion-footer-bar keyboard-attach class="item-input-inset">

      <label class="item-input-wrapper">
        <i class="icon ion-ios7-search placeholder-icon"></i>
        <input ng-focus="inputUp()" ng-blur="inputDown()" type="text" placeholder="Message"
        ng-model="message">
      </label>
      <a class="button button-stable" ng-click="takePicture()">
        <i class="icon ion-camera"></i>
      </a>
    </ion-footer-bar>
  </form>
</ion-view>




      

  
